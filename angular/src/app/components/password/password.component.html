<!--
  Untill the angular material bug is fixed you can't use ngIf inside a mat-form-field, so
  the workaround is to put it on the mat-form-field and duplicate the mat-errors :(.
-->
<mat-form-field *ngIf="controlName === 'confirmPassword'" class="form-field" [formGroup]="parentForm">
  <input matInput [placeholder]="placeholder" [formControlName]="controlName" [type]="showPassword ? 'text' : 'password'" [autocomplete]="autocomplete" [errorStateMatcher]="errorMatcher"/>
  <mat-icon matSuffix (click)="showPassword = !showPassword">{{showPassword ? 'visibility' : 'visibility_off'}}</mat-icon>
  <mat-error *ngIf="parentForm.hasError('required', controlName)">
    <strong>required</strong>
  </mat-error>
  <mat-error *ngIf="parentForm.hasError('minlength', controlName)">
    <strong>minimum length is 8 characters</strong>
  </mat-error>
  <mat-error *ngIf="parentForm.hasError('maxlength', controlName)">
    <strong>maximum length is 256 characters</strong>
  </mat-error>
  <mat-error *ngIf="parentForm.hasError('passwordMismatch')">
    <strong>passwords don't match</strong>
  </mat-error>
</mat-form-field>

<mat-form-field *ngIf="controlName !== 'confirmPassword'" class="form-field" [formGroup]="parentForm">
  <input matInput [placeholder]="placeholder" [formControlName]="controlName" [type]="showPassword ? 'text' : 'password'" [autocomplete]="autocomplete"/>
  <mat-icon matSuffix (click)="showPassword = !showPassword">{{showPassword ? 'visibility' : 'visibility_off'}}</mat-icon>
  <mat-error *ngIf="parentForm.hasError('required', controlName)">
    <strong>required</strong>
  </mat-error>
  <mat-error *ngIf="parentForm.hasError('minlength', controlName)">
    <strong>minimum length is 8 characters</strong>
  </mat-error>
  <mat-error *ngIf="parentForm.hasError('maxlength', controlName)">
    <strong>maximum length is 256 characters</strong>
  </mat-error>
</mat-form-field>
